<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>update</title>
    <link rel="stylesheet" href="../views/style.css">

    <script>
        async function submitChanges(){
            console.log("HELLOOO");
            const id = document.querySelector("#id").value;
            const name = document.querySelector("#name").value;
            const breed = document.querySelector("#breed").value;

            const data = new URLSearchParams();
            data.append('id', id);
            data.append('name', name);
            data.append('breed', breed);

            const response = await fetch(`/GA/cats`, {method:"PATCH", body:data, headers:{"Content-type":"application/x-www-form-urlencoded"}, redirect:"manual"});
            const loco = response.headers.get("Loco");
            console.log(loco);

            const json = await response.text();
            console.log(json);
            window.location.href = loco;
        }

        // php vill inte ha in grejer i json utan i det som står i headers 
        // ?id=${id}&catName=${name}&catBreed=${breed} efter cats 
    </script>
</head>
<body>
    <h2>UPDATE INFO ABOUT THE CAT</h2>
    <form>
        <input id="id" type="text" name="id" placeholder="id?"/>
        <input id="name" type="text" name="catName" placeholder="change name?"/>
        <input id="breed" type="text" name="catBreed" placeholder="change breed?"/>
        <button onclick="submitChanges()" type="button">update</button> <!-- form är gay och ändrar button utan type -->
    </form>
</body>
</html>